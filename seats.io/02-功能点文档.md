# Seats.io Designer - 功能点文档（基于模块角度）

## 目录

1. [画布模块 (Canvas Module)](#1-画布模块-canvas-module)
2. [区域模块 (Section Module)](#2-区域模块-section-module)
3. [座位模块 (Seat Module)](#3-座位模块-seat-module)
4. [工具系统 (Tool System)](#4-工具系统-tool-system)
5. [视图模块 (Viewport Module)](#5-视图模块-viewport-module)
6. [选择模块 (Selection Module)](#6-选择模块-selection-module)
7. [命令系统 (Command System)](#7-命令系统-command-system)
8. [属性面板模块 (Properties Panel Module)](#8-属性面板模块-properties-panel-module)
9. [图层面板模块 (Layers Panel Module)](#9-图层面板模块-layers-panel-module)
10. [类别管理模块 (Category Module)](#10-类别管理模块-category-module)
11. [导入导出模块 (Import/Export Module)](#11-导入导出模块-importexport-module)
12. [快捷键模块 (Shortcut Module)](#12-快捷键模块-shortcut-module)

---

## 1. 画布模块 (Canvas Module)

### 1.1 画布基础


| 功能点   | 描述                  | 优先级 |
| ----- | ------------------- | --- |
| 画布初始化 | 创建 SVG 画布，设置初始视口    | P0  |
| 背景网格  | 显示/隐藏网格，支持多种网格样式    | P1  |
| 背景图片  | 上传 SVG/PNG/JPG 作为底图 | P2  |
| 背景颜色  | 纯白色色背景              | P2  |
| 透明度调节 | 背景图片透明度 100%        | P2  |


### 1.2 坐标系统


| 功能点         | 描述                             | 优先级 |
| ----------- | ------------------------------ | --- |
| Screen 坐标   | 屏幕像素坐标                         | P0  |
| Viewport 坐标 | 视口坐标 (CSS pixels)              | P0  |
| World 坐标    | 世界坐标 (-25000~25000)            | P0  |
| 坐标转换        | Screen ↔ Viewport ↔ World 双向转换 | P0  |
| 网格吸附        | 对齐到网格点                         | P1  |


### 1.3 渲染分层


| 功能点           | 描述            | 优先级 |
| ------------- | ------------- | --- |
| 背景层 (Layer 0) | 网格、背景图片       | P0  |
| 区域层 (Layer 1) | Section 多边形渲染 | P0  |
| 座位层 (Layer 2) | Seat 图形渲染     | P0  |
| 标注层 (Layer 3) | 文字标签、图标       | P1  |
| 交互层 (Layer 4) | 选中框、拖拽预览、辅助线等 | P0  |


---

## 2. 区域模块 (Section Module)

### 2.1 区域创建


| 功能点          | 描述              | 优先级 |
| ------------ | --------------- | --- |
| 多边形绘制        | 点击添加顶点，闭合创建     | P0  |
| 矩形绘制         | 拖拽创建矩形区域        | P1  |
| 圆形绘制         | 拖拽创建圆形/椭圆形      | P1  |
| 多边形绘制自动闭合    | 双击/Enter/点击起点闭合 | P0  |
| 多边形绘制最小顶点数限制 | 至少3个顶点才能创建      | P0  |
| 多边形绘制自交检测    | 防止创建自交多边形       | P2  |


### 2.2 区域编辑


| 功能点  | 描述         | 优先级 |
| ---- | ---------- | --- |
| 顶点编辑 | 拖动顶点调整形状   | P0  |
| 添加顶点 | 在边上点击添加新顶点 | P1  |
| 删除顶点 | 删除多余顶点     | P1  |
| 形状闭合 | 重新编辑已闭合区域  | P2  |
| 区域移动 | 整体拖拽移动     | P0  |
| 实时预览 | 绘制/编辑时显示预览 | P0  |


### 2.3 区域属性


| 功能点  | 描述        | 优先级 |
| ---- | --------- | --- |
| 名称设置 | 区域显示名称    | P0  |
| 类别绑定 | 关联座位类别    | P0  |
| 颜色设置 | 填充颜色、边框颜色 | P0  |
| 透明度  | 填充透明度调节   | P1  |
| 容量统计 | 显示座位数量    | P1  |


### 2.4 区域管理


| 功能点   | 描述          | 优先级 |
| ----- | ----------- | --- |
| 删除区域  | 删除选中区域及内部座位 | P0  |
| 复制区域  | 复制区域及其座位    | P2  |
| 区域层级  | 调整渲染顺序      | P1  |
| 显示/隐藏 | 切换区域可见性     | P1  |
| 锁定区域  | 防止误操作       | P1  |


### 2.5 Focus Mode


| 功能点  | 描述         | 优先级 |
| ---- | ---------- | --- |
| 进入编辑 | 双击进入区域编辑模式 | P0  |
| 自动校准 | 自动缩放以适应区域  | P0  |
| 淡化其他 | 其他区域降低透明度  | P0  |
| 退出恢复 | 恢复原始视图状态   | P0  |
| 独立编辑 | 仅编辑当前区域座位  | P0  |


---

## 3. 座位模块 (Seat Module)

### 3.1 座位创建


| 功能点  | 描述         | 优先级 |
| ---- | ---------- | --- |
| 单个添加 | 点击放置单个座位   | P0  |
| 行添加  | 拖拽创建一行座位   | P0  |
| 曲线排布 | 沿曲线创建座位    | P1  |
| 表格添加 | 矩形网格批量创建   | P1  |
| 数量预览 | 显示将要创建的座位数 | P1  |
| 方向调整 | 调整行方向角度    | P1  |


### 3.2 座位编辑


| 功能点  | 描述            | 优先级 |
| ---- | ------------- | --- |
| 拖拽移动 | 移动单个/多个座位     | P0  |
| 旋转   | 旋转座位方向        | P1  |
| 镜像   | 水平/垂直翻转       | P2  |
| 对齐   | 左/中/右/上/中/下对齐 | P1  |
| 分布   | 水平/垂直均匀分布     | P1  |


### 3.3 座位属性


| 功能点   | 描述           | 优先级 |
| ----- | ------------ | --- |
| 排号设置  | 设置座位排号       | P0  |
| 座位号设置 | 设置座位编号       | P0  |
| 类别设置  | 关联座位类别       | P0  |
| 状态设置  | 可用/已售/锁定/不可用 | P0  |
| 特殊标记  | 无障碍座位、VIP等   | P1  |


### 3.4 座位管理


| 功能点  | 描述        | 优先级 |
| ---- | --------- | --- |
| 删除座位 | 删除选中座位    | P0  |
| 批量删除 | 删除多个座位    | P0  |
| 复制座位 | 复制选中座位    | P1  |
| 智能编号 | 自动编号、重新编号 | P1  |
| 编号预览 | 显示座位编号预览  | P1  |


### 3.5 座位检测


| 功能点  | 描述        | 优先级 |
| ---- | --------- | --- |
| 重叠检测 | 检测座位重叠    | P0  |
| 间距警告 | 座位过于接近时警告 | P1  |
| 区域归属 | 判断座位所属区域  | P0  |
| 位置校验 | 确保座位在区域内  | P1  |


---

## 4. 工具系统 (Tool System)

### 4.1 工具基础架构


| 功能点   | 描述         | 优先级 |
| ----- | ---------- | --- |
| 工具基类  | 定义工具接口规范   | P0  |
| 工具管理器 | 注册、切换、管理工具 | P0  |
| 事件分发  | 鼠标/键盘事件分发  | P0  |
| 状态管理  | 工具状态保存与恢复  | P0  |
| 光标切换  | 根据工具切换光标   | P0  |


### 4.2 选择工具 (ViewTool)


| 功能点  | 描述           | 优先级 |
| ---- | ------------ | --- |
| 画布平移 | Space/中键拖拽平移 | P0  |
| 画布缩放 | 滚轮缩放         | P0  |
| 对象选择 | 点击选中对象       | P0  |
| 多选支持 | Shift + 点击多选 | P0  |
| 双击进入 | 双击进入区域编辑     | P0  |


### 4.3 区域绘制工具 (DrawSectionTool)


| 功能点  | 描述            | 优先级 |
| ---- | ------------- | --- |
| 顶点创建 | 点击创建多边形顶点     | P0  |
| 实时预览 | 显示正在绘制的边      | P0  |
| 闭合提示 | 靠近起点时提示闭合     | P0  |
| 闭合方式 | 双击/Enter/点击起点 | P0  |
| 取消绘制 | Esc 取消当前绘制    | P0  |
| 网格吸附 | 吸附到网格点        | P1  |


### 4.4 座位绘制工具 (DrawSeatTool)


| 功能点  | 描述       | 优先级 |
| ---- | -------- | --- |
| 单点模式 | 逐个点击放置座位 | P0  |
| 行模式  | 拖拽创建行    | P0  |
| 曲线模式 | 沿曲线放置    | P1  |
| 实时预览 | 显示座位预览位置 | P0  |
| 间距设置 | 调整座位间距   | P1  |
| 方向调整 | 调整座位朝向   | P1  |


### 4.5 移动工具 (MoveTool)


| 功能点  | 描述        | 优先级 |
| ---- | --------- | --- |
| 对象拖拽 | 拖拽移动对象    | P0  |
| 多选拖拽 | 同时移动多个对象  | P0  |
| 拖拽预览 | 显示移动预览轮廓  | P0  |
| 对齐辅助 | 智能对齐线     | P1  |
| 间距提示 | 显示与其他对象间距 | P2  |


---

## 5. 视图模块 (Viewport Module)

### 5.1 视口变换


| 功能点  | 描述              | 优先级 |
| ---- | --------------- | --- |
| 缩放控制 | 10% - 500% 缩放范围 | P0  |
| 平移控制 | 画布位置移动          | P0  |
| 中心缩放 | 以鼠标位置为中心缩放      | P0  |
| 平滑缩放 | 缩放动画过渡          | P1  |


### 5.2 视图预设


| 功能点     | 描述       | 优先级 |
| ------- | -------- | --- |
| 100% 视图 | 还原原始比例   | P0  |
| 适应屏幕    | 缩放到适应画布  | P0  |
| 适应宽度    | 缩放到适应宽度  | P1  |
| 适应选中    | 缩放到选中对象  | P1  |
| 保存视图    | 保存当前视图状态 | P2  |


### 5.3 视口计算


| 功能点  | 描述               | 优先级 |
| ---- | ---------------- | --- |
| 边界计算 | 计算内容边界框          | P0  |
| 自动校准 | 自动缩放到指定区域        | P0  |
| 状态保存 | 保存/恢复视口状态        | P0  |
| 转换矩阵 | 计算 SVG transform | P0  |


---

## 6. 选择模块 (Selection Module)

### 6.1 选择基础


| 功能点  | 描述              | 优先级 |
| ---- | --------------- | --- |
| 单选   | 点击选中单个对象        | P0  |
| 加选   | Shift + 点击添加选择  | P0  |
| 减选   | Shift + 点击已选中移除 | P0  |
| 全选   | Ctrl+A 全选       | P0  |
| 取消选择 | Esc / 点击空白取消    | P0  |


### 6.2 框选功能


| 功能点  | 描述          | 优先级 |
| ---- | ----------- | --- |
| 矩形框选 | 拖拽矩形选择区域内对象 | P0  |
| 交叉选择 | 接触框线即选中     | P1  |
| 包含选择 | 完全包含才选中     | P1  |
| 套索选择 | 自由绘制选择区域    | P2  |


### 6.3 选择管理


| 功能点  | 描述           | 优先级 |
| ---- | ------------ | --- |
| 选择集  | 使用 Set 管理选中项 | P0  |
| 类型过滤 | 按类型过滤选择      | P1  |
| 反选   | 反选当前选择       | P2  |
| 选择历史 | 保存选择历史       | P3  |


### 6.4 选择可视化


| 功能点  | 描述       | 优先级 |
| ---- | -------- | --- |
| 选中框  | 显示对象选中边框 | P0  |
| 高亮效果 | 选中对象高亮   | P0  |
| 统计信息 | 显示选中数量   | P0  |


---

## 7. 命令系统 (Command System)

### 7.1 命令基础


| 功能点  | 描述             | 优先级 |
| ---- | -------------- | --- |
| 命令接口 | 定义 Command 规范  | P0  |
| 执行方法 | execute() 执行命令 | P0  |
| 撤销方法 | undo() 撤销命令    | P0  |
| 重做方法 | redo() 重做命令    | P0  |
| 命令描述 | 描述信息用于历史记录     | P1  |


### 7.2 命令管理器


| 功能点  | 描述       | 优先级 |
| ---- | -------- | --- |
| 历史栈  | 维护命令历史   | P0  |
| 执行命令 | 执行并记录命令  | P0  |
| 撤销操作 | 撤销最近命令   | P0  |
| 重做操作 | 重做已撤销命令  | P0  |
| 历史限制 | 最大历史数量限制 | P1  |
| 清空历史 | 清空命令历史   | P2  |


### 7.3 具体命令实现


| 功能点                  | 描述     | 优先级 |
| -------------------- | ------ | --- |
| CreateSectionCommand | 创建区域   | P0  |
| DeleteSectionCommand | 删除区域   | P0  |
| MoveSectionCommand   | 移动区域   | P0  |
| UpdateSectionCommand | 更新区域属性 | P0  |
| CreateSeatCommand    | 创建座位   | P0  |
| DeleteSeatCommand    | 删除座位   | P0  |
| MoveSeatsCommand     | 移动座位   | P0  |
| UpdateSeatCommand    | 更新座位属性 | P0  |
| BatchCommand         | 批量命令组合 | P1  |


---

## 8. 属性面板模块 (Properties Panel Module)

### 8.1 区域属性面板


| 功能点   | 描述      | 优先级 |
| ----- | ------- | --- |
| 名称编辑  | 修改区域名称  | P0  |
| 类别选择  | 选择关联类别  | P0  |
| 颜色选择  | 填充/边框颜色 | P0  |
| 透明度滑块 | 调整填充透明度 | P1  |
| 容量显示  | 显示座位数量  | P1  |
| 编辑形状  | 进入形状编辑  | P0  |
| 删除按钮  | 删除区域    | P0  |


### 8.2 座位属性面板


| 功能点   | 描述     | 优先级 |
| ----- | ------ | --- |
| 排号编辑  | 修改排号   | P0  |
| 座位号编辑 | 修改座位号  | P0  |
| 类别选择  | 选择座位类别 | P0  |
| 状态选择  | 选择座位状态 | P0  |
| 批量编辑  | 批量修改属性 | P1  |
| 删除按钮  | 删除座位   | P0  |


### 8.3 多选属性面板


| 功能点  | 描述          | 优先级 |
| ---- | ----------- | --- |
| 对齐按钮 | 左/中/右/上/中/下 | P1  |
| 分布按钮 | 水平/垂直均分     | P1  |
| 统一类别 | 批量设置类别      | P1  |
| 统一颜色 | 批量设置颜色      | P1  |
| 删除全部 | 删除选中对象      | P0  |


---

## 9. 图层面板模块 (Layers Panel Module)

### 9.1 图层列表


| 功能点  | 描述        | 优先级 |
| ---- | --------- | --- |
| 图层树  | 显示所有区域和座位 | P0  |
| 嵌套显示 | 区域下显示座位组  | P0  |
| 数量统计 | 显示座位数量    | P1  |
| 选中同步 | 与画布选择同步   | P0  |


### 9.2 图层操作


| 功能点   | 描述      | 优先级 |
| ----- | ------- | --- |
| 可见性切换 | 显示/隐藏图层 | P0  |
| 锁定切换  | 锁定/解锁图层 | P1  |
| 拖拽排序  | 调整图层顺序  | P1  |
| 重命名   | 修改图层名称  | P1  |
| 删除    | 删除图层    | P0  |


### 9.3 快捷操作


| 功能点   | 描述      | 优先级 |
| ----- | ------- | --- |
| 展开/收起 | 展开/收起子项 | P1  |
| 全部显示  | 显示所有图层  | P1  |
| 全部隐藏  | 隐藏所有图层  | P1  |
| 全部锁定  | 锁定所有图层  | P2  |
| 全部解锁  | 解锁所有图层  | P2  |


---

## 10. 类别管理模块 (Category Module)

### 10.1 类别基础


| 功能点  | 描述       | 优先级 |
| ---- | -------- | --- |
| 类别列表 | 显示所有座位类别 | P0  |
| 颜色编码 | 每个类别关联颜色 | P0  |
| 定价设置 | 设置类别价格   | P1  |
| 图标选择 | 选择类别图标   | P2  |


### 10.2 类别操作


| 功能点  | 描述     | 优先级 |
| ---- | ------ | --- |
| 添加类别 | 创建新类别  | P0  |
| 编辑类别 | 修改类别信息 | P0  |
| 删除类别 | 删除类别   | P0  |
| 类别排序 | 调整类别顺序 | P2  |


### 10.3 类别应用


| 功能点   | 描述     | 优先级 |
| ----- | ------ | --- |
| 应用到区域 | 区域关联类别 | P0  |
| 应用到座位 | 座位关联类别 | P0  |
| 批量应用  | 批量设置类别 | P1  |


---

## 11. 导入导出模块 (Import/Export Module)

### 11.1 导入功能


| 功能点    | 描述            | 优先级 |
| ------ | ------------- | --- |
| SVG 导入 | 导入 SVG 作为背景   | P1  |
| 图片导入   | 导入 PNG/JPG 背景 | P1  |
| CAD 导入 | 导入 CAD 文件     | P3  |
| 数据导入   | 导入座位数据        | P2  |


### 11.2 导出功能


| 功能点     | 描述         | 优先级 |
| ------- | ---------- | --- |
| SVG 导出  | 导出为 SVG 文件 | P1  |
| PNG 导出  | 导出为 PNG 图片 | P1  |
| PDF 导出  | 导出为 PDF    | P2  |
| JSON 导出 | 导出座位数据     | P0  |


### 11.3 保存加载


| 功能点  | 描述        | 优先级 |
| ---- | --------- | --- |
| 自动保存 | 定时自动保存    | P1  |
| 手动保存 | Ctrl+S 保存 | P0  |
| 项目加载 | 加载保存的项目   | P0  |
| 版本管理 | 保存历史版本    | P2  |


---

## 12. 快捷键模块 (Shortcut Module)

### 12.1 全局快捷键


| 功能点 | 快捷键                   | 优先级 |
| --- | --------------------- | --- |
| 撤销  | Ctrl+Z                | P0  |
| 重做  | Ctrl+Shift+Z / Ctrl+Y | P0  |
| 保存  | Ctrl+S                | P0  |
| 全选  | Ctrl+A                | P0  |
| 删除  | Delete / Backspace    | P0  |
| 取消  | Esc                   | P0  |


### 12.2 工具快捷键


| 功能点  | 快捷键 | 优先级 |
| ---- | --- | --- |
| 选择工具 | V   | P0  |
| 区域绘制 | S   | P0  |
| 单个座位 | P   | P0  |
| 行添加  | L   | P0  |
| 表格添加 | T   | P1  |
| 曲线排布 | B   | P2  |
| 文本标注 | X   | P2  |


### 12.3 视图快捷键


| 功能点     | 快捷键        | 优先级 |
| ------- | ---------- | --- |
| 显示/隐藏网格 | Ctrl+G     | P1  |
| 放大      | Ctrl+Plus  | P0  |
| 缩小      | Ctrl+Minus | P0  |
| 100% 视图 | Ctrl+0     | P0  |
| 适应屏幕    | Ctrl+1     | P0  |
| 临时抓手    | Space (按住) | P0  |


### 12.4 编辑快捷键


| 功能点  | 快捷键              | 优先级 |
| ---- | ---------------- | --- |
| 微调移动 | 方向键 (1px)        | P1  |
| 大幅移动 | Shift+方向键 (10px) | P1  |
| 复制   | Ctrl+C           | P1  |
| 粘贴   | Ctrl+V           | P1  |
| 剪切   | Ctrl+X           | P1  |


---

## 附录：优先级定义

- **P0 (Critical)**: 核心功能，必须实现
- **P1 (High)**: 重要功能，建议实现
- **P2 (Medium)**: 一般功能，可选实现
- **P3 (Low)**: 次要功能，低优先级

## 附录：功能状态追踪


| 模块   | 已实现 | 进行中  | 待实现     |
| ---- | --- | ---- | ------- |
| 画布模块 | 80% | -    | 背景图片    |
| 区域模块 | 70% | 顶点编辑 | 矩形/圆形绘制 |
| 座位模块 | 60% | 拖拽移动 | 曲线排布    |
| 工具系统 | 50% | -    | 套索选择    |
| 视图模块 | 90% | -    | 平滑缩放    |
| 选择模块 | 70% | -    | 套索选择    |
| 命令系统 | 80% | -    | 批量命令    |
| 属性面板 | 60% | -    | 多选面板    |
| 图层面板 | 40% | -    | 拖拽排序    |
| 类别管理 | 50% | -    | 定价设置    |
| 导入导出 | 20% | -    | 大部分功能   |
| 快捷键  | 60% | -    | 编辑快捷键   |


