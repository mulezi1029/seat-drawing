# Seats.io Designer - UI & 交互设计文档

## 1. 整体界面布局

### 1.1 三栏式布局结构

```
┌─────────────────────────────────────────────────────────────┐
│  Top Navigation Bar (顶部导航栏)：                            │
├──────────┬──────────────────────────────────────┬───────────┤
│          │                                      │           │
│  Left    │         Canvas Area                  │  Right    │
│  Toolbar │         (画布区域)                    │  Panel    │
│  (左侧    │                                      │  (右侧面板)│
│   工具栏) │    ┌────────────────────────┐       │           │
│          │    │   Background Image     │       │  [属性]    │
│[选择/拖拽]│    │                        │       │  [图层]    │
│  [绘制]   │    │   ┌──────┐  ┌───┐     │       │  [设置]    │
│  [座位]   │    │   │Section│  │Seat│     │       │           │
│  [文本]   │    │   │      │  └───┘     │       │           │
│  [测量]   │    │   └──────┘             │       │           │
│          │    │                        │       │           │
│          │    └────────────────────────┘       │           │
│          │                                      │           │
├──────────┴──────────────────────────────────────┴───────────┤
│  Bottom Status Bar (底部状态栏)                              │
│  [缩放控制] [坐标显示] [选中对象信息] [帮助链接]               │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 布局原则

- **固定侧边栏**：左右面板固定宽度，定位到两侧，中间画布设置一个初始很大的尺寸
- **沉浸式画布**：画布区域占据主要视觉空间，减少干扰
- **上下文面板**：右侧面板根据选中对象动态变化
- **浮动工具提示**：操作提示以浮层形式出现

---

## 2. 顶部导航栏 (Top Navigation Bar)

### 2.1 左侧区域

- **Logo/品牌标识**：点击返回主页
- **项目名称**：可编辑的项目名称输入框
- **保存状态**：自动保存指示器（已保存/保存中/未保存）

### 2.2 中间区域

- **视图切换器**：Design / Preview / Code 标签切换
- **撤销/重做按钮**：与快捷键提示结合

### 2.3 右侧区域

- **预览按钮**：在新窗口预览座位图
- **发布按钮**：发布版本管理
- **用户菜单**：设置、帮助、登出

---

## 3. 左侧工具栏 (Left Toolbar)

### 3.1 工具分类

#### 选择工具组 (Selection)


| 图标   | 工具名称          | 快捷键        | 功能描述    |
| ---- | ------------- | ---------- | ------- |
| 鼠标指针 | 选择工具 (Select) | V          | 选择、移动对象 |
| 抓手   | 抓手工具 (Pan)    | Space+Drag | 平移画布视图  |


#### 绘制工具组 (Drawing)


| 图标  | 工具名称           | 快捷键 | 功能描述       |
| --- | -------------- | --- | ---------- |
| 多边形 | 绘制区域 (Section) | S   | 绘制多边形区域    |
| 矩形  | 矩形区域           | R   | 快速绘制矩形区域   |
| 圆形  | 圆形区域           | C   | 绘制圆形/椭圆形区域 |


#### 座位工具组 (Seating)


| 图标   | 工具名称 | 快捷键 | 功能描述     |
| ---- | ---- | --- | -------- |
| 单个座位 | 单个添加 | P   | 逐个点击添加座位 |
| 行    | 行添加  | L   | 拖动创建一行座位 |
| 曲线   | 曲线排布 | B   | 沿曲线排布座位  |
| 表格   | 表格添加 | T   | 矩形网格批量添加 |


#### 标注工具组 (Annotation)


| 图标  | 工具名称 | 快捷键 | 功能描述         |
| --- | ---- | --- | ------------ |
| 文字  | 文本标注 | X   | 添加文字标签       |
| 图标  | 设施标记 | I   | 添加出入口、卫生间等标记 |


### 3.2 工具状态反馈

- **选中状态**：高亮边框 + 背景色变化
- **悬停状态**：tooltip 显示工具名称和快捷键
- **禁用状态**：灰色显示，不可点击

---

## 4. 画布区域 (Canvas Area)

### 4.1 视觉层次

```
┌─────────────────────────────────────────┐
│  Layer 0: 背景层                         │
│  - 网格 (可切换显示/隐藏)                 │
│  - 背景图片                               │
├─────────────────────────────────────────┤
│  Layer 1: 区域层 (Sections)              │
│  - 填充多边形                             │
│  - 边框线条                               │
│  - 区域名称标签                           │
├─────────────────────────────────────────┤
│  Layer 2: 座位层 (Seats)                 │
│  - 座位图形 (圆形/方形/自定义)             │
│  - 座位编号                               │
│  - 状态颜色 (可用/已售/锁定)              │
├─────────────────────────────────────────┤
│  Layer 3: 标注层 (Annotations)           │
│  - 文字标签                               │
│  - 图标标记                               │
├─────────────────────────────────────────┤
│  Layer 4: 交互层 (Interaction Overlay)   │
│  - 选中框                                 │
│  - 拖拽预览                               │
│  - 绘制辅助线                             │
│  - 测量线                                 │
└─────────────────────────────────────────┘
```

### 4.2 网格系统

- **显示切换**：Ctrl+G 或按钮切换
- **网格密度**：10px, 20px, 50px, 100px 可选
- **对齐模式**：自由绘制 / 强制对齐网格
- **网格样式**：点状/线状/十字状

### 4.3 画布背景

- **纯色背景**：支持自定义颜色
- **背景图片**：支持上传 SVG/PNG/JPG 作为底图
- **透明度调节**：背景图片透明度 0-100%

---

## 5. 右侧面板 (Right Panel)

### 5.1 属性面板 (Properties) - 动态内容

#### 选中区域时的属性

```
┌─────────────────┐
│ Section 属性    │
├─────────────────┤
│ 名称: [输入框]   │
│ 类别: [下拉选择] │
│ 颜色: [颜色选择] │
│ 容量: [显示]     │
│                 │
│ [编辑形状]      │
│ [删除区域]      │
└─────────────────┘
```

#### 选中座位时的属性

```
┌─────────────────┐
│ Seat 属性       │
├─────────────────┤
│ 排号: [输入框]   │
│ 座位号: [输入框] │
│ 类别: [下拉选择] │
│ 状态: [状态选择] │
│                 │
│ [批量编辑]      │
│ [删除座位]      │
└─────────────────┘
```

#### 多选时的属性

```
┌─────────────────┐
│ 批量编辑 (12项) │
├─────────────────┤
│ 对齐方式:       │
│ [左][中][右]    │
│ [上][中][下]    │
│                 │
│ 分布:           │
│ [水平均分]      │
│ [垂直均分]      │
│                 │
│ [统一类别]      │
│ [统一颜色]      │
│ [删除全部]      │
└─────────────────┘
```

### 5.2 图层面板 (Layers)

```
┌─────────────────┐
│ 图层           ▼│
├─────────────────┤
│ 👁️ 🏷️ Section A  │
│ 👁️ 🏷️ Section B  │
│    🪑 Seats (45)│
│ 👁️ 🏷️ Section C  │
│                 │
│ [+] [🗑️] [🔒]   │
└─────────────────┘
```

- 显示所有区域和座位组
- 支持拖拽排序（层级调整）
- 可见性切换、锁定、删除

### 5.3 类别管理面板 (Categories)

```
┌─────────────────┐
│ 座位类别       ▼│
├─────────────────┤
│ ● VIP      $100 │
│ ● 普通      $50  │
│ ● 学生      $30  │
│ ● 无障碍   $50  │
│                 │
│ [+ 添加类别]    │
└─────────────────┘
```

- 颜色编码系统
- 定价设置
- 图标选择

---

## 6. 底部状态栏 (Bottom Status Bar)

### 6.1 左侧 - 缩放控制

```
[-] [====●====] [+] [100%] [适应屏幕]
```

- 滑块控制缩放级别 (10% - 500%)
- 预设按钮：100%、适应屏幕、适应宽度

### 6.2 中间 - 坐标与信息

```
X: 1234  Y: 567 | 已选: 12个座位 | 总计: 450个座位
```

- 鼠标当前坐标（世界坐标系）
- 选中对象数量
- 项目统计信息

### 6.3 右侧 - 帮助与快捷操作

- [?] 帮助中心
- [⌨️] 快捷键列表
- [⚙️] 画布设置

---

## 7. 交互模式详细设计

### 7.1 视图模式 (View Mode)

#### 基本导航


| 操作   | 交互                | 反馈              |
| ---- | ----------------- | --------------- |
| 平移画布 | Space + 拖拽 / 中键拖拽 | 抓手光标，画布跟随移动     |
| 缩放   | 滚轮 / Ctrl+滚轮      | 以鼠标位置为中心缩放      |
| 框选   | Shift + 拖拽        | 显示选择框，松开选中区域内对象 |
| 套索选  | Alt + 拖拽          | 显示自由绘制选择线       |


#### 对象选择


| 操作   | 交互            | 反馈         |
| ---- | ------------- | ---------- |
| 单选   | 点击对象          | 对象高亮，显示选中框 |
| 加选   | Shift + 点击    | 添加到当前选择    |
| 减选   | Shift + 点击已选中 | 从选择中移除     |
| 全选   | Ctrl+A        | 选中所有同类型对象  |
| 取消选择 | Esc / 点击空白    | 清空选择       |


### 7.2 绘制模式 (Drawing Mode)

#### 绘制区域流程

```
1. 选择多边形工具
   ↓ 光标变为十字准星
2. 点击画布放置第一个顶点
   ↓ 显示顶点标记，绘制临时线段跟随鼠标
3. 继续点击添加更多顶点
   ↓ 每次点击添加顶点，显示多边形预览
4. 点击第一个顶点闭合 / 双击闭合 / Enter闭合
   ↓ 弹出区域属性对话框
5. 输入名称、选择类别、确认
   ↓ 区域创建完成，切换到选择工具
```

#### 绘制辅助

- **实时预览**：移动鼠标时显示边线预览
- **闭合提示**：鼠标靠近起始点时高亮提示
- **网格吸附**：开启时自动吸附到网格点
- **正交锁定**：Shift 键锁定水平/垂直方向

### 7.3 座位编辑模式 (Seat Editing)

#### 单个添加流程

```
1. 选择单个座位工具
   ↓ 光标变为座位图标预览
2. 在画布上移动
   ↓ 实时预览座位位置（半透明）
3. 点击放置
   ↓ 创建座位，可继续添加
4. 按 Esc 或切换工具结束
```

#### 批量添加（行）

```
1. 选择行添加工具
2. 点击确定起点
   ↓ 显示起点标记
3. 拖动确定方向
   ↓ 显示方向线和座位预览
4. 释放确定终点
   ↓ 生成一行座位
```

### 7.4 拖拽移动 (Drag & Drop)

#### 区域移动

```
1. 选中区域
   ↓ 显示选中框和拖拽手柄
2. 在区域内按下鼠标
   ↓ 光标变为 grabbing
3. 拖拽移动
   ↓ 显示区域轮廓预览（半透明）
4. 释放鼠标
   ↓ 区域移动到新位置
```

#### 座位移动

```
1. 选中一个或多个座位
2. 按下鼠标开始拖拽
   ↓ 显示所有选中座位的轮廓预览
3. 移动到新位置
   ↓ 预览跟随鼠标
4. 释放完成移动
```

#### 对齐辅助

- **智能对齐线**：移动时显示与其他对象的对齐参考线
- **间距提示**：显示与相邻对象的间距数值
- **吸附**：靠近其他对象时自动吸附对齐

---

## 8. 快捷键系统

### 8.1 全局快捷键


| 快捷键                   | 功能            |
| --------------------- | ------------- |
| Ctrl+Z                | 撤销            |
| Ctrl+Shift+Z / Ctrl+Y | 重做            |
| Ctrl+S                | 保存            |
| Ctrl+A                | 全选            |
| Delete / Backspace    | 删除选中          |
| Esc                   | 取消当前操作 / 取消选择 |
| Space (按住)            | 临时切换到抓手工具     |


### 8.2 工具切换快捷键


| 快捷键 | 工具   |
| --- | ---- |
| V   | 选择工具 |
| S   | 区域绘制 |
| P   | 单个座位 |
| L   | 行添加  |
| T   | 表格添加 |
| B   | 曲线排布 |
| X   | 文本标注 |


### 8.3 编辑操作快捷键


| 快捷键        | 功能         |
| ---------- | ---------- |
| Ctrl+G     | 显示/隐藏网格    |
| Ctrl+R     | 显示/隐藏标尺    |
| Ctrl+Plus  | 放大         |
| Ctrl+Minus | 缩小         |
| Ctrl+0     | 100% 视图    |
| Ctrl+1     | 适应屏幕       |
| 方向键        | 微调位置（1px）  |
| Shift+方向键  | 微调位置（10px） |


---

## 9. 视觉设计规范

### 9.1 色彩系统

#### 主色调

- **品牌主色**：#3B82F6 (蓝色)
- **成功/可用**：#22C55E (绿色)
- **警告/已售**：#EF4444 (红色)
- **信息/锁定**：#6B7280 (灰色)
- **背景色**：#F8FAFC (浅灰)

#### 座位颜色状态

```
可用:    #3B82F6 (蓝色)
已售:    #EF4444 (红色)
锁定:    #6B7280 (灰色)
不可用:  #E5E7EB (浅灰)
选中:    #F59E0B (橙色边框)
```

### 9.2 字体规范

- **界面字体**：Inter, -apple-system, sans-serif
- **代码字体**：JetBrains Mono, monospace
- **标签字号**：12px (小), 14px (中), 16px (大)
- **画布标注**：10px - 14px 根据缩放动态调整

### 9.3 间距与尺寸

- **工具栏宽度**：56px (图标模式) / 200px (展开模式)
- **右侧面板宽度**：280px
- **顶部导航高度**：48px
- **底部状态栏高度**：32px
- **面板间距**：16px
- **圆角**：4px (小), 8px (中), 12px (大)

---

## 10. 反馈与动画

### 10.1 微交互


| 场景   | 动画          | 时长    |
| ---- | ----------- | ----- |
| 按钮悬停 | 背景色渐变       | 150ms |
| 工具切换 | 图标缩放 + 颜色变化 | 100ms |
| 选中对象 | 选中框淡入       | 200ms |
| 对象创建 | 缩放弹出        | 200ms |
| 删除对象 | 淡出 + 缩小     | 200ms |
| 拖拽预览 | 跟随鼠标，轻微透明   | 实时    |


### 10.2 加载状态

- **保存中**：按钮显示旋转图标 + "Saving..."
- **加载中**：骨架屏或旋转加载器
- **处理中**：进度条或不确定进度指示器

### 10.3 通知系统

- **成功通知**：绿色提示条，3秒后自动消失
- **错误通知**：红色提示条，需要手动关闭
- **警告通知**：黄色提示条，5秒后自动消失
- **信息提示**：蓝色提示条，可配置停留时间

---

## 11. 特殊交互场景

### 11.1 进入/退出区域编辑 (Focus Mode)

#### 进入区域编辑

```
1. 双击区域 或 选择"编辑区域"
   ↓
2. 自动缩放视图以适应区域
   ↓ (动画 300ms)
3. 其他区域淡化显示 (opacity 0.3)
   ↓
4. 显示区域编辑工具栏
   ↓
5. 可编辑区域内座位
```

#### 退出区域编辑

```
1. 点击"完成"或"返回" 或 按 Esc
   ↓
2. 恢复原始视图状态
   ↓ (动画 300ms)
3. 显示所有区域正常状态
   ↓
4. 回到视图模式
```

### 11.2 撤销/重做反馈

- **撤销时**：被撤销的操作对象短暂闪烁（颜色变化）
- **重做时**：重新执行的操作对象短暂高亮
- **历史面板**：显示操作列表，当前位置高亮

### 11.3 冲突处理

#### 座位重叠检测

```
当放置/移动座位时：
1. 检测与其他座位的距离
2. 如果距离 < 最小间距：
   - 座位显示红色警告边框
   - 显示警告提示 "座位过于接近"
   - 不允许完成操作
```

#### 区域重叠检测

```
当绘制/移动区域时：
1. 检测与其他区域的边界交叉
2. 如果检测到重叠：
   - 重叠区域显示红色高亮
   - 显示确认对话框
   - 用户可选择：取消 / 强制创建
```

