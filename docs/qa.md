# 座位编辑器常见问题 (Q&A)

## 区域尺寸断层与校准

### Q1: 在大型场馆底图上编辑小尺寸区域时会遇到什么问题？

**A:** 主要会遇到以下问题：
- 编辑区视觉上只有"指甲盖"大小
- 12px 的座位几乎无法精准点击和放置
- 坐标精度丢失，布局难以对齐

---

### Q2: 如何解决小尺寸区域编辑困难的问题？

**A:** 采用**"先校准尺寸基准，再独立缩放编辑"**的方式：
1. 进入编辑前进行尺寸校准
2. 进入编辑时自动适配缩放
3. 编辑过程中使用坐标双向映射
4. 退出编辑后进行坐标归一化

这样可以在保证用户操作舒适度的同时，维持坐标系统的一致性。

---

### Q3: 进入编辑前需要进行什么准备工作？

**A:**
1. 提示用户将视图缩放到合适级别，使光标圆圈与底图上的单个座位大小完全匹配
2. 系统记录当前缩放级别下"1 个座位 = N 像素"的比例
3. 将此比例作为后续所有操作的尺寸基准

---

### Q4: 编辑时的自动缩放是如何工作的？

**A:**
- 系统根据校准得到的座位尺寸，自动计算并应用缩放比例
- 将目标 Section 放大到用户可舒适操作的最小尺寸（如 400×400px）
- **重要**：缩放仅作用于编辑视图，不修改底图原始坐标

---

### Q5: 编辑过程中的坐标如何处理？

**A:** 采用**坐标双向映射**机制：

**编辑坐标 → 原始坐标：**
- 用户在放大后的编辑视图中点击时，系统将编辑坐标按缩放比例还原
- 得到底图上的真实位置并存储

**原始坐标 → 编辑坐标：**
- 从数据库加载已有座位时，系统将原始坐标按缩放比例转换
- 在编辑视图中正确显示

---

### Q6: 退出编辑后坐标如何处理？

**A:**
- 所有编辑操作的坐标都以**底图原始坐标系**为准
- 确保与其他模块（如售票、检票）的数据一致性
- 不因编辑时的缩放而影响实际存储的数据

---

### Q7: 缩放比例如何计算？

**A:**
- 以"编辑区最小可操作尺寸"为目标
- 分别计算宽、高方向的缩放比例
- 取较大值，确保编辑区整体达到可操作尺寸
- **原则**：只放大不缩小（比例 ≥ 1）

---

### Q8: 坐标转换的公式是什么？

**A:**

```
编辑坐标 → 原始坐标：
  原始X = 编辑X / 缩放比例
  原始Y = 编辑Y / 缩放比例

原始坐标 → 编辑坐标：
  编辑X = 原始X × 缩放比例
  编辑Y = 原始Y × 缩放比例
```

---

### Q9: 视觉反馈方面需要注意什么？

**A:**
1. **显示缩放级别**：明确显示当前缩放级别（如"Zoom level: 500%"），让用户感知到当前视图是经过放大的
2. **提供缩放控制**：提供 +/- 按钮、滚轮等，允许用户在编辑过程中微调视图

---

### Q10: 这个方案有什么优势？

**A:**

| 优势 | 说明 |
|------|------|
| **操作友好** | 解决了小区域编辑时的视觉和交互困难 |
| **数据准确** | 通过坐标映射，保证了编辑结果与底图的一致性 |
| **可扩展性** | 该方案可无缝集成到自动扫描、批量绘制等高级功能中 |
