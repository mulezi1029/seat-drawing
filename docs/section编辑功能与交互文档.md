# Section 编辑功能与交互文档

## 文档概述

本文档详细描述了 Section（区域）编辑模式的所有功能和交互方式，包括校准流程和座位绘制编辑功能。

**版本**：v1.5.2  
**更新日期**：2026-02-26

---

## 目录

1. [功能概述](#功能概述)
2. [校准流程](#校准流程)
3. [座位绘制工具](#座位绘制工具)
4. [座位选择功能](#座位选择功能)
5. [座位编辑功能](#座位编辑功能)
6. [快捷键](#快捷键)
7. [交互细节](#交互细节)

---

## 功能概述

### 整体流程

```
主画布
  ↓ 双击 Section
进入 Section 编辑模式
  ↓
校准流程（首次进入）
  ├─ 步骤 1：放置座位
  ├─ 步骤 2：调整尺寸
  └─ 步骤 3：定义间距
  ↓
座位编辑模式
  ├─ 绘制座位（单排/矩阵）
  ├─ 选择座位
  ├─ 编辑座位（移动/旋转/删除）
  └─ 修改属性
  ↓
保存并返回主画布
```

### 核心功能

1. **校准功能**：将虚拟座位尺寸与背景图对齐
2. **绘制工具**：单排座位、矩阵座位
3. **选择功能**：单击选择、框选、多选
4. **编辑功能**：移动、旋转、删除、属性修改
5. **坐标系统**：座位使用局部坐标，跟随 Section 移动

---

## 校准流程

### 概述

校准流程参照 **seats.io** 的交互设计，通过三个步骤建立虚拟座位与背景图的映射关系。

### 步骤 1：放置座位

**目的**：在背景图上标记实际座位的位置

**交互方式**：
```
1. 背景图显示在画布中心
2. 鼠标悬停显示座位预览（正方形）
3. 单击放置座位
4. 座位自动吸附到鼠标位置
5. 可以放置多个座位作为参考点
```

**视觉反馈**：
- 鼠标悬停：半透明蓝色正方形跟随鼠标
- 已放置：白色正方形，蓝色边框
- 座位尺寸：使用当前校准的 `seatVisual.size`

**操作**：
- 单击：放置座位
- 拖拽：移动已放置的座位
- 点击"下一步"：进入步骤 2

### 步骤 2：调整尺寸

**目的**：调整虚拟座位的尺寸，使其与背景图上的实际座位对齐

**交互方式**：
```
1. 显示步骤 1 放置的所有座位
2. 右侧面板显示尺寸调节器
3. 拖动滑块或输入数值调整尺寸
4. 座位实时更新尺寸
5. 调整到与背景图对齐
```

**调节器**：
- **座位尺寸**：10-100 pt（步长 1）
- **横向间距**：0-50 pt（步长 1）
- **纵向间距**：0-50 pt（步长 1）

**视觉反馈**：
- 座位实时缩放
- 显示当前数值
- 网格线辅助对齐（可选）

**操作**：
- 拖动滑块：调整数值
- 输入框：精确输入
- 点击"下一步"：进入步骤 3

### 步骤 3：定义间距

**目的**：定义座位的行间距，完成校准

**交互方式**：
```
1. 显示第一排座位（高亮）
2. 用户拖拽定义第二排位置
3. 系统自动计算行间距
4. 显示计算结果
5. 确认完成校准
```

**拖拽交互**：
- 起点：第一排任意座位
- 终点：第二排对应位置
- 实时显示：虚线连接、距离标注
- 自动计算：垂直距离作为行间距

**视觉反馈**：
- 第一排：蓝色高亮
- 拖拽线：蓝色虚线
- 距离标签：显示计算的行间距
- 第二排预览：半透明座位

**操作**：
- 拖拽：定义第二排位置
- 点击"完成校准"：进入座位编辑模式

### 校准数据

校准完成后保存的数据：
```typescript
{
  canvasScale: 1.0,        // 画布缩放
  anchorScale: 1.0,        // 锚点缩放
  seatVisual: {
    size: 30,              // 座位尺寸 (pt)
    gapX: 5,               // 横向间距 (pt)
    gapY: 8,               // 纵向间距 (pt)
  },
  isCalibrated: true,      // 是否已校准
}
```

---

## 座位绘制工具

### 工具概览

| 工具 | 快捷键 | 功能 | 交互方式 |
|------|--------|------|----------|
| 选择工具 | V | 选择和编辑座位 | 单击/框选/拖拽 |
| 单排工具 | 1 | 绘制单排座位 | 拖拽绘制 |
| 矩阵工具 | 2 | 绘制矩阵座位 | 两步拖拽 |

### 单排座位工具

**功能**：绘制一排座位，支持任意方向

**交互流程**（参照 seats.io）：
```
1. 按 1 键切换到单排工具
2. 在画布上按住鼠标左键
3. 拖拽定义方向和长度
4. 实时预览座位位置
5. 释放鼠标完成绘制
```

**实时预览**：
- 🔵 蓝色正方形座位：沿拖拽方向均匀分布
- 📏 蓝色虚线：连接起点和终点
- 🏷️ 黑色数量标签：显示座位数量（中点位置）
- 🔄 自动旋转：座位对齐拖拽方向

**座位数量计算**：
```typescript
const distance = Math.hypot(dx, dy);
const cellWidth = seatVisual.size + seatVisual.gapX;
const seatCount = Math.max(1, Math.round(distance / cellWidth));
```

**座位分布**：
```typescript
// 沿拖拽方向均匀分布
for (let i = 0; i < seatCount; i++) {
  const t = seatCount === 1 ? 0 : i / (seatCount - 1);
  x = startX + dx * t;
  y = startY + dy * t;
}
```

**座位旋转**：
```typescript
const angle = Math.atan2(dy, dx) * 180 / Math.PI;
// 座位自动旋转对齐拖拽方向
```

**组 ID**：
- 格式：`seat-group-{timestamp}-{index}`
- 示例：`seat-group-1234567890-0`
- 用途：组选择、批量操作

### 矩阵座位工具

**功能**：绘制矩形座位布局，支持任意角度

**交互流程**（参照 seats.io 两步绘制）：

#### 第一步：绘制第一排

```
1. 按 2 键切换到矩阵工具
2. 拖拽绘制第一排座位
3. 实时预览：
   • 蓝色正方形座位
   • 蓝色虚线连接线
   • 黑色数量标签
4. 释放鼠标，第一排固定在画布上
```

**视觉反馈**：
- 与单排工具相同
- 座位自动旋转对齐拖拽方向
- 数量标签显示座位数

#### 第二步：垂直扩展

```
1. 第一排已固定在画布上（白色）
2. 在任意位置拖拽
3. 系统自动计算垂直方向
4. 实时预览：
   • 第一排：深蓝色（已固定）
   • 新增行：浅蓝色（预览）
   • 矩阵尺寸标签："行数 × 列数"
5. 释放鼠标完成矩阵绘制
```

**垂直方向计算**：
```typescript
// 第一排方向向量
const rowUnitX = rowDx / rowLength;
const rowUnitY = rowDy / rowLength;

// 垂直方向单位向量（逆时针旋转90度）
const perpUnitX = -rowUnitY;
const perpUnitY = rowUnitX;
```

**行数计算**：
```typescript
// 拖拽点到第一排的垂直距离
const perpDistance = Math.abs(dragDx * perpUnitX + dragDy * perpUnitY);

// 根据行间距计算行数
const cellHeight = seatVisual.size + seatVisual.gapY;
const rowCount = Math.max(1, Math.round(perpDistance / cellHeight));
```

**座位生成**：
```typescript
for (let r = 0; r < rowCount; r++) {
  for (let c = 0; c < colCount; c++) {
    seats.push({
      id: `seat-${groupId}-${r}-${c}`,
      x: firstRow[c].x + perpUnitX * cellHeight * r,
      y: firstRow[c].y + perpUnitY * cellHeight * r,
      row: String.fromCharCode(65 + r),  // A, B, C...
      number: c + 1,
      angle: firstRow[c].angle,  // 保持第一排的角度
    });
  }
}
```

**组 ID**：
- 格式：`seat-group-{timestamp}-{row}-{col}`
- 示例：`seat-group-1234567890-0-0`
- 用途：组选择、批量操作

**取消操作**：
- 第一步绘制中：按 ESC 取消
- 第二步绘制中：按 ESC 删除第一排并重置
- 切换工具：自动删除第一排并重置

---

## 座位选择功能

### 选择模式

选择工具（V 键）支持三种选择方式：

1. **单击选择**：选中整组座位
2. **框选选择**：框选范围内的所有组
3. **Ctrl+单击**：切换组的选中状态

### 组选择机制

**核心原则**：所有选择操作都以**绘制的组为单位**

**组的定义**：
- 单排工具：一次绘制的所有座位
- 矩阵工具：一次绘制的整个矩阵

**组 ID 提取**：
```typescript
const getGroupId = (seatId: string): string | null => {
  // 匹配单排格式: seat-group-123-0
  // 匹配矩阵格式: seat-group-123-0-1
  const groupMatch = seatId.match(/^seat-(group-\d+)-/);
  return groupMatch ? groupMatch[1] : null;
};
```

### 单击选择

**交互流程**：
```
1. 切换到选择工具（V 键）
2. 单击任意座位
3. 自动选中整组座位
4. 显示蓝色边框
```

**实现逻辑**：
```typescript
const handleSeatClick = (seatId: string) => {
  if (!e.ctrlKey) {
    // 单击：选中整组
    const expandedIds = expandToGroups([seatId]);
    onSelectSeats(expandedIds);
  }
};
```

**视觉反馈**：
- 选中座位：蓝色边框（3px）
- 未选中座位：区域颜色边框（2px）

### 框选选择

**交互流程**：
```
1. 切换到选择工具
2. 在空白处按住鼠标左键
3. 拖拽绘制选择框
4. 释放鼠标完成框选
5. 自动扩展为完整的组
```

**扩展逻辑**：
```typescript
// 1. 找到框选范围内的座位
const seatsInBox = seats.filter(s => isInBox(s, selectionBox));

// 2. 扩展为完整的组
const expandedIds = expandToGroups(seatsInBox.map(s => s.id));

// 3. 选中所有组
onSelectSeats(expandedIds);
```

**示例**：
```
绘制 3×5 矩阵（15个座位）
框选只覆盖左上角 2×2 区域（4个座位）
结果：选中整个矩阵（15个座位）✅
```

**视觉反馈**：
- 选择框：蓝色半透明矩形
- 边框：蓝色虚线（3px 间距）

### Ctrl+单击多选

**交互流程**：
```
1. 单击选中第一组
2. Ctrl+单击第二组 → 添加到选择
3. Ctrl+单击第一组 → 取消第一组
4. 继续 Ctrl+单击其他组
```

**切换逻辑**：
```typescript
const handleSeatClick = (seatId: string) => {
  if (e.ctrlKey) {
    const groupId = getGroupId(seatId);
    const groupSeatIds = getGroupSeatIds(groupId);
    
    const newSelection = new Set(selectedSeatIds);
    const isGroupSelected = groupSeatIds.some(id => newSelection.has(id));
    
    if (isGroupSelected) {
      // 取消选中整组
      groupSeatIds.forEach(id => newSelection.delete(id));
    } else {
      // 选中整组
      groupSeatIds.forEach(id => newSelection.add(id));
    }
    
    onSelectSeats(Array.from(newSelection));
  }
};
```

**示例**：
```
绘制 3 个矩阵：A（3×3）、B（2×4）、C（5×2）

操作：
1. 单击矩阵 A → 选中 9 个座位
2. Ctrl+单击矩阵 B → 选中 9+8=17 个座位
3. Ctrl+单击矩阵 C → 选中 17+10=27 个座位
4. Ctrl+单击矩阵 A → 选中 27-9=18 个座位（B+C）
```

---

## 座位编辑功能

### 边界框和旋转手柄

**显示条件**：
- 选中一个或多个座位
- 当前工具为选择工具
- 不在绘制、拖拽或框选状态

**边界框**：
- 样式：蓝色虚线矩形
- 范围：包围所有选中座位
- 用途：显示选中范围、提供拖拽区域

**旋转手柄**：
- 位置：边界框顶部中心上方 20px
- 样式：蓝色圆点（半径 6px）+ 白色边框（2px）
- 连接线：从边界框顶部到旋转手柄
- 光标：`grab` / `grabbing`

### 移动座位

**方式 1：点击座位拖拽**
```
1. 选中座位（单击选中整组）
2. 再次按住已选中的座位
3. 拖拽移动
4. 实时预览半透明效果
5. 释放鼠标完成移动
```

**方式 2：边界框拖拽**
```
1. 选中座位（显示边界框）
2. 在边界框内任意位置按住鼠标
3. 拖拽移动整组座位
4. 更大的可操作区域
5. 释放鼠标完成移动
```

**防止意外拖拽**：
- ⚠️ 只有已选中的座位才能拖拽
- ⚠️ 单击未选中的座位不会触发拖拽
- ✅ 这样可以避免意外移动座位

**实现逻辑**：
```typescript
const handleSeatMouseDown = (seatId: string) => {
  // 只有当座位已经被选中时才允许拖拽
  if (selectedSeatIds.has(seatId)) {
    setDraggingSeatIds(Array.from(selectedSeatIds));
    setDragStartWorld(worldPos);
  }
  // 如果座位未选中，不做任何操作（由 onClick 处理选择）
};
```

**视觉反馈**：
- 拖拽中：座位半透明（opacity: 0.6）
- 光标：`grabbing`
- 实时跟随鼠标移动

### 旋转座位

**交互流程**：
```
1. 选中座位（显示边界框和旋转手柄）
2. 点击并拖拽旋转手柄
3. 实时预览旋转效果
4. 显示当前旋转角度
5. 释放鼠标完成旋转
```

**旋转中心**：
- 边界框的几何中心
- 计算方式：`centerX = (minX + maxX) / 2`, `centerY = (minY + maxY) / 2`

**旋转计算**：
```typescript
const rotateSeat = (seat: Seat, center: Point, angle: number): Seat => {
  const rad = angle * (Math.PI / 180);
  const cos = Math.cos(rad);
  const sin = Math.sin(rad);
  
  const dx = seat.x - center.x;
  const dy = seat.y - center.y;
  
  return {
    ...seat,
    x: center.x + dx * cos - dy * sin,
    y: center.y + dx * sin + dy * cos,
    angle: seat.angle + angle,  // 累加旋转角度
  };
};
```

**视觉反馈**：
- 旋转中：
  - 边界框跟随旋转
  - 座位实时显示旋转后位置（半透明）
  - 角度文本显示当前角度（如 "45°"）
- 旋转手柄：光标变为 `grabbing`

### 删除座位

**交互流程**：
```
1. 选中座位（单个、整组或多个）
2. 按 Delete 或 Backspace 键
3. 选中的座位立即被删除
```

**支持的删除方式**：
- 单击选中整组 → Delete → 删除整组
- Ctrl+单击多选 → Delete → 删除多个组
- 框选多个座位 → Delete → 批量删除

**实现逻辑**：
```typescript
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    if (e.code === 'Delete' || e.code === 'Backspace') {
      if (selectedSeatIds.size > 0) {
        e.preventDefault();
        onDeleteSeats(Array.from(selectedSeatIds));
      }
    }
  };
  window.addEventListener('keydown', handleKeyDown, true);
  return () => window.removeEventListener('keydown', handleKeyDown, true);
}, [selectedSeatIds, onDeleteSeats]);
```

**防止冲突**：
- 只在 section 编辑模式内响应 Delete 键
- 主画布的 Delete 键检查 `!sectionEditState.isActive`
- 避免删除整个 section

### 修改属性

**属性面板**（右侧）：

**单个座位选中时**：
- 行号（row）：文本输入框
- 座位号（number）：数字输入框
- 类型（type）：下拉选择
  - 正常座位（normal）
  - VIP 座位（vip）
  - 无障碍座位（accessible）
  - 空位（empty）
- 角度（angle）：数字输入框（0-360°）
- 坐标：只读显示（x, y）
- ID：只读显示（截断）

**多个座位选中时**：
- 类型（type）：批量修改
- 角度（angle）：批量修改
- 其他属性：不可编辑

**实时更新**：
- 修改属性后立即生效
- 画布中的座位实时更新
- 无需手动保存

---

## 快捷键

### 工具切换

| 快捷键 | 功能 |
|--------|------|
| V | 切换到选择工具 |
| 1 | 切换到单排座位工具 |
| 2 | 切换到矩阵座位工具 |
| ESC | 取消绘制 / 切换回选择工具 |

### 编辑操作

| 快捷键 | 功能 |
|--------|------|
| Delete / Backspace | 删除选中座位 |
| Ctrl+A | 全选座位（待实现） |
| Ctrl+单击 | 多选座位 |
| Ctrl+Z | 撤销（待实现） |
| Ctrl+Y | 重做（待实现） |

### 画布控制

| 操作 | 功能 |
|------|------|
| Space+拖拽 | 平移画布 |
| Ctrl+滚轮 | 缩放画布 |
| 双击空白 | 重置视图（待实现） |

---

## 交互细节

### 鼠标交互优先级

在 `handleMouseDown` 中的检测顺序：

```
1. Space 键按下 → 平移画布
2. 旋转手柄点击 → 开始旋转
3. 已选中的座位点击 → 开始拖拽
4. 空白区域点击 → 开始框选/绘制
```

### 绘制工具交互

**单排工具**：
```
mouseDown → 开始绘制
mouseMove → 实时预览（座位、连接线、数量）
mouseUp → 完成绘制，添加座位
ESC → 取消绘制
```

**矩阵工具**：
```
第一步：
  mouseDown → 开始绘制第一排
  mouseMove → 实时预览（座位、连接线、数量）
  mouseUp → 完成第一排，固定在画布上

第二步：
  mouseDown → 开始垂直扩展
  mouseMove → 实时预览（矩阵、尺寸标签）
  mouseUp → 完成矩阵，添加所有座位
  ESC → 删除第一排，重置状态
```

### 选择工具交互

**单击座位**：
```
onClick → 选中整组座位
显示蓝色边框
显示边界框和旋转手柄
```

**Ctrl+单击座位**：
```
onClick + Ctrl → 切换组的选中状态
如果组已选中 → 取消选中整组
如果组未选中 → 添加整组到选择
```

**框选**：
```
mouseDown（空白处）→ 开始框选
mouseMove → 显示选择框
mouseUp → 完成框选，扩展为完整的组
```

**拖拽座位**：
```
mouseDown（已选中座位）→ 开始拖拽
mouseMove → 实时预览移动
mouseUp → 完成移动，更新座位位置
```

**旋转座位**：
```
mouseDown（旋转手柄）→ 开始旋转
mouseMove → 实时预览旋转，显示角度
mouseUp → 完成旋转，更新座位位置和角度
```

### 视觉反馈

**座位状态**：
- 正常：白色填充，区域颜色边框（2px）
- 选中：白色填充，蓝色边框（3px）
- 拖拽中：半透明（opacity: 0.6）
- 旋转中：半透明（opacity: 0.6）
- VIP：金色填充（#fbbf24）

**边界框**：
- 样式：蓝色虚线（strokeDasharray: "4,2"）
- 宽度：1px（缩放自适应）
- 显示条件：选中座位且不在绘制/拖拽/框选状态

**旋转手柄**：
- 非旋转：蓝色圆点，光标 `grab`
- 旋转中：蓝色圆点，光标 `grabbing`，显示角度文本

**绘制预览**：
- 单排：蓝色正方形（rgba(59, 130, 246, 0.3)）
- 矩阵第一步：蓝色正方形（rgba(59, 130, 246, 0.3)）
- 矩阵第二步：
  - 第一排：深蓝色（rgba(59, 130, 246, 0.5)）
  - 新增行：浅蓝色（rgba(59, 130, 246, 0.3)）

### 坐标系统

**三套坐标系**：

1. **屏幕坐标系（Screen）**
   - 原点：浏览器窗口左上角
   - 单位：像素（px）
   - 用途：鼠标事件

2. **世界坐标系（World）**
   - 原点：虚拟画布中心 (0, 0)
   - 范围：(-25000, -25000) ~ (25000, 25000)
   - 用途：编辑时的座位坐标

3. **局部坐标系（Local）**
   - 原点：Section 边界框左上角
   - 范围：相对于 section
   - 用途：存储座位坐标

**坐标转换**：
```typescript
// 保存时：世界坐标 → 局部坐标
const localSeat = {
  x: seat.x - sectionOrigin.x,
  y: seat.y - sectionOrigin.y,
};

// 加载时：局部坐标 → 世界坐标
const worldSeat = {
  x: seat.x + sectionOrigin.x,
  y: seat.y + sectionOrigin.y,
};
```

**优点**：
- 座位位置相对于 section 固定
- 移动 section 时，座位自动跟随
- 为未来的旋转/缩放功能做好准备

---

## 使用场景

### 场景 1：绘制标准剧院布局

```
1. 双击 section 进入编辑模式
2. 完成校准流程
3. 按 2 切换到矩阵工具
4. 绘制第一排（20 个座位）
5. 向下拖拽扩展为 10 排
6. 完成 10×20 = 200 个座位
7. 框选前 3 排，设置为 VIP
8. 保存并返回
```

### 场景 2：绘制不规则座位布局

```
1. 进入编辑模式，完成校准
2. 按 1 切换到单排工具
3. 绘制第一排（水平方向）
4. 绘制第二排（稍微倾斜）
5. 绘制第三排（继续倾斜）
6. 选中所有座位，微调位置
7. 保存并返回
```

### 场景 3：调整现有座位

```
1. 进入已有座位的 section
2. 选中需要调整的座位组
3. 拖拽旋转手柄调整角度
4. 拖拽移动到新位置
5. 修改属性（类型、行号等）
6. 保存并返回
```

### 场景 4：批量编辑座位

```
1. 进入编辑模式
2. 框选多个座位组
3. 在属性面板批量修改类型为 VIP
4. 继续框选其他座位
5. 批量修改角度
6. 保存并返回
```

---

## 最佳实践

### 校准建议

1. **放置参考座位**：
   - 在不同位置放置多个座位
   - 覆盖背景图的不同区域
   - 便于验证校准准确性

2. **调整尺寸**：
   - 使用滑块快速调整
   - 使用输入框精确输入
   - 放大画布查看细节

3. **定义间距**：
   - 选择清晰的两排座位
   - 确保垂直对齐
   - 验证计算结果

### 绘制建议

1. **选择合适的工具**：
   - 规则布局：使用矩阵工具
   - 单排座位：使用单排工具
   - 不规则布局：组合使用

2. **利用组选择**：
   - 绘制时自动分组
   - 便于批量操作
   - 减少重复工作

3. **使用快捷键**：
   - V / 1 / 2 快速切换工具
   - ESC 快速取消操作
   - Delete 快速删除

### 编辑建议

1. **先选择，再操作**：
   - 单击选中整组
   - 确认选择范围
   - 再进行编辑

2. **使用边界框**：
   - 更大的拖拽区域
   - 清晰的选中反馈
   - 便于旋转操作

3. **批量编辑**：
   - 框选多个组
   - 统一修改属性
   - 提高效率

---

## 常见问题

### Q: 如何取消正在绘制的座位？
**A:** 按 ESC 键即可取消当前绘制。
- 单排工具：取消当前拖拽
- 矩阵工具第一步：取消当前拖拽
- 矩阵工具第二步：删除第一排并重置

### Q: 如何选中整个矩阵？
**A:** 单击矩阵中的任意一个座位，整个矩阵会自动被选中。

### Q: 如何同时选中多个组？
**A:** 
- 方式 1：框选多个组的部分区域，系统自动扩展
- 方式 2：单击第一组，然后 Ctrl+单击其他组

### Q: 移动 section 后座位位置不对怎么办？
**A:** 这个问题已在 v1.5.2 修复。座位使用局部坐标存储，会自动跟随 section 移动。

### Q: 如何修改座位角度？
**A:** 
- 方式 1（推荐）：选中座位，拖拽边界框顶部的旋转手柄
- 方式 2：选中座位，在右侧属性面板输入精确角度值

### Q: 矩阵工具如何绘制倾斜的座位？
**A:** 
1. 第一步：斜向拖拽绘制第一排
2. 第一排会自动旋转对齐拖拽方向
3. 第二步：垂直于第一排方向拖拽
4. 整个矩阵保持第一排的旋转角度

---

## 版本历史

### v1.5.2 (2026-02-26)
- 🐛 修复座位位置不跟随 section 移动的问题
- ✨ 座位使用局部坐标存储

### v1.5.1 (2026-02-26)
- 🐛 修复矩阵座位组选择失效
- ✨ 优化组 ID 提取正则表达式

### v1.5 (2026-02-26)
- ✨ 矩阵座位两步绘制（seats.io 风格）
- ✨ 垂直方向自动计算
- ✨ 实时预览矩阵布局

### v1.4 (2026-02-26)
- ✨ 座位选择边界框和旋转手柄
- ✨ 拖拽旋转功能
- ✨ 实时旋转预览

### v1.3.1 (2026-02-26)
- 🐛 优化拖拽交互
- ✨ 防止单击拖拽

### v1.3 (2026-02-26)
- ✨ 统一组选择行为
- ✨ 框选自动扩展为整组

### v1.2.1 (2026-02-26)
- 🐛 修复 Delete 键冲突

### v1.2 (2026-02-26)
- ✨ 正方形座位预览
- ✨ ESC 键快捷操作
- ✨ 座位组选择

### v1.1 (2026-02-26)
- ✨ 单排座位拖拽绘制（seats.io 风格）
- ✨ 实时预览和数量标签

---

*文档结束*
