# 座位绘制快速指南

## 🎯 完整工作流程

### 1️⃣ 绘制座位

#### 单排座位（推荐）
```
1. 按 1 键 → 切换到单排座位工具
2. 在画布上拖拽 → 定义方向和长度
3. 实时预览：
   ✓ 蓝色正方形座位
   ✓ 虚线连接线
   ✓ 黑色数量标签
4. 释放鼠标 → 完成绘制
```

#### 矩阵座位（两步绘制）
```
第一步：绘制第一排
1. 按 2 键 → 切换到矩阵座位工具
2. 拖拽绘制第一排座位
3. 实时预览：蓝色正方形 + 数量标签
4. 释放鼠标 → 第一排固定

第二步：垂直扩展
1. 第一排已固定在画布上
2. 在垂直方向拖拽
3. 实时预览：完整矩阵布局
   • 第一排：深蓝色（已固定）
   • 新增行：浅蓝色（预览）
4. 释放鼠标 → 完成矩阵绘制
```

### 2️⃣ 选择座位

#### 选中整组（推荐）
```
1. 按 ESC 或 V 键 → 切换到选择工具
2. 单击任意座位 → 自动选中整组
   • 单排工具绘制：选中整排
   • 矩阵工具绘制：选中整个矩阵
3. 批量操作：移动、删除、编辑属性
```

#### 框选选择（智能扩展）
```
1. 拖拽框选部分座位
2. ✨ 自动扩展为完整的组
3. 即使只框选到一个座位，也会选中整组
```

#### 多组选择
```
• 单击第一组 → 选中第一组
• Ctrl+单击第二组 → 添加第二组
• Ctrl+单击第一组 → 取消第一组
• 框选多个组 → 自动选中所有涉及的完整组
```

### 3️⃣ 编辑座位

#### 移动座位
```
方式 1：点击座位拖拽
1. 选中座位（单击选中整组）
2. 再次按住已选中的座位
3. 拖拽移动
4. 实时预览半透明效果

方式 2：边界框拖拽
1. 选中座位（显示蓝色边界框）
2. 在边界框内任意位置按住鼠标
3. 拖拽移动整组座位
4. 更大的可操作区域
```

**注意**：
- ⚠️ 只有已选中的座位才能拖拽
- ⚠️ 单击未选中的座位不会触发拖拽
- ✅ 这样可以避免意外移动座位

#### 旋转座位
```
1. 选中座位（显示蓝色边界框）
2. 边界框顶部出现旋转手柄（蓝色圆点）
3. 拖拽旋转手柄
4. 实时预览旋转效果和角度
5. 释放鼠标完成旋转
```

**旋转特性**：
- 🎯 旋转中心：边界框的几何中心
- 📐 角度显示：实时显示当前旋转角度
- 👁️ 实时预览：座位半透明显示旋转后位置
- 🔄 批量旋转：支持同时旋转多组座位

#### 编辑属性
```
1. 选中座位
2. 右侧面板修改：
   • 行号（A, B, C...）
   • 座位号（1, 2, 3...）
   • 类型（正常/VIP/无障碍/空位）
   • 角度（0-360°）
```

#### 删除座位
```
1. 选中座位（单个、整组或多个）
2. 按 Delete 或 Backspace 键
3. 选中的座位立即被删除
```

**支持的删除方式**：
- 单击选中整组 → Delete → 删除整组
- Ctrl+单击多选 → Delete → 删除多个
- 框选多个座位 → Delete → 批量删除

## ⌨️ 快捷键速查

### 工具切换
| 按键 | 功能 |
|------|------|
| V | 选择工具 |
| 1 | 单排座位工具 |
| 2 | 矩阵座位工具 |
| ESC | 取消绘制 / 切换回选择工具 |

### 编辑操作
| 按键 | 功能 |
|------|------|
| Delete / Backspace | 删除选中座位 |
| Ctrl+A | 全选座位 |
| Ctrl+单击 | 多选座位 |

### 画布控制
| 操作 | 功能 |
|------|------|
| Space+拖拽 | 平移画布 |
| Ctrl+滚轮 | 缩放画布 |

## 💡 使用技巧

### 技巧 1：快速绘制多排座位

**方式 1：使用矩阵工具（推荐）**
```
1. 按 2 → 拖拽绘制第一排
2. 释放鼠标，第一排固定
3. 向下拖拽扩展为多排
4. 释放鼠标完成
```

**方式 2：使用单排工具**
```
1. 按 1 → 拖拽绘制第一排
2. 按 ESC → 切换回选择工具
3. 单击选中整排 → 拖拽复制位置
4. 重复步骤 1-3 绘制其他排
```

### 技巧 2：精确对齐
```
1. 绘制第一排座位
2. 按 ESC 切换到选择工具
3. 选中整排座位
4. 拖拽移动到精确位置
5. 在右侧面板微调角度
```

### 技巧 3：批量修改类型
```
1. 框选多个座位
2. 右侧面板选择类型（如 VIP）
3. 所有选中座位同时变更
```

### 技巧 4：取消错误操作
```
• 绘制中发现位置不对 → 按 ESC 取消
• 选错座位 → 单击空白处取消选择
• 移动错误 → 按 Ctrl+Z 撤销（待实现）
```

## 🎨 视觉反馈说明

### 绘制预览
- **蓝色正方形**：预览座位位置
- **蓝色虚线**：连接起点和终点
- **黑色标签**：显示座位数量

### 选中状态
- **蓝色边框**：选中的座位
- **蓝色虚线矩形框**：选中座位的边界框
- **旋转手柄**：边界框顶部的蓝色圆点
- **半透明**：拖拽移动或旋转中的座位
- **虚线框**：框选区域
- **角度文本**：旋转时显示的角度数值

### 座位类型
- **白色**：正常座位
- **金色**：VIP 座位
- **其他**：根据类型自定义

## 🔄 完整示例

### 示例：绘制剧院式座位布局

```
步骤 1：绘制第一排（10个座位）
1. 按 1 键
2. 从左到右拖拽
3. 看到 10 个蓝色正方形预览
4. 释放鼠标

步骤 2：选中并复制
1. 按 ESC 键
2. 单击任意座位（选中整排）
3. 拖拽向下移动一定距离

步骤 3：继续绘制其他排
1. 重复步骤 1-2
2. 绘制 5-10 排座位

步骤 4：设置 VIP 区域
1. 框选前三排座位
2. 右侧面板选择"VIP"类型
3. 座位变为金色

步骤 5：保存
1. 点击顶部"保存"按钮
2. 返回主画布
```

## ❓ 常见问题

### Q: 如何取消正在绘制的座位？
**A:** 按 ESC 键即可取消当前绘制。
- 单排工具：取消当前拖拽
- 矩阵工具第一步：取消当前拖拽
- 矩阵工具第二步：删除第一排并重置

### Q: 如何选中一整排座位？
**A:** 单击该排中的任意一个座位，整排会自动被选中。

### Q: 如何选中整个矩阵？
**A:** 单击矩阵中的任意一个座位，整个矩阵会自动被选中。矩阵工具绘制的所有座位都属于同一个组。

### Q: 框选时只选到部分座位怎么办？
**A:** 不用担心！系统会自动扩展为完整的组。即使框选只覆盖到一个座位，也会选中整组。

### Q: 如何同时选中多个组？
**A:** 
- 方式 1：框选多个组的部分区域，系统自动扩展
- 方式 2：单击第一组，然后 Ctrl+单击其他组

### Q: Ctrl+单击的作用是什么？
**A:** Ctrl+单击用于切换整组的选中状态：
- 如果组已选中 → 取消选中整组
- 如果组未选中 → 添加整组到选择

### Q: 座位数量如何控制？
**A:** 拖拽距离决定座位数量，距离越长座位越多。

### Q: 座位方向如何控制？
**A:** 拖拽方向即座位排列方向，座位会自动旋转对齐。

### Q: 如何修改已绘制座位的角度？
**A:** 有两种方式：
- **方式 1（推荐）**：选中座位，拖拽边界框顶部的旋转手柄，实时预览旋转效果
- **方式 2**：选中座位，在右侧面板的"角度"输入框中输入精确角度值

### Q: 如何删除一整组座位？
**A:** 单击选中整组座位，然后按 Delete 或 Backspace 键即可删除整组。

### Q: 可以批量删除多个座位吗？
**A:** 可以。使用框选或 Ctrl+单击选中多个座位，然后按 Delete 键批量删除。

### Q: 可以撤销操作吗？
**A:** 目前可以通过删除座位来撤销，完整的撤销/重做功能待实现。

## 🚀 进阶功能（待实现）

- [ ] 弧线排列工具
- [ ] 自动编号功能
- [ ] 撤销/重做
- [ ] 座位模板
- [ ] 批量编号

### Q: 矩阵工具如何绘制倾斜的座位？
**A:** 
1. 第一步：斜向拖拽绘制第一排
2. 第一排会自动旋转对齐拖拽方向
3. 第二步：垂直于第一排方向拖拽
4. 整个矩阵保持第一排的旋转角度

### Q: 矩阵工具第二步如何判断垂直方向？
**A:** 系统会自动计算第一排的方向，然后在垂直方向（逆时针旋转90度）扩展新的行。无论第一排是什么角度，第二步都会自动垂直对齐。

---

*最后更新: 2026-02-26*
*版本: v1.5.1*
