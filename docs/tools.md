# 座位绘制系统功能清单

基于 seats.io 官方文档和界面截图，designer 模块的左侧工具栏根据当前所处的编辑模式（顶级视图 vs Section 内部视图）会显示不同的工具。

## 📋 功能实现清单

### 🎯 核心功能（优先级最高）

根据项目需求，以下三个是核心能力：

#### 1. Section 工具 - 绘制观众区域/区块
- [ ] 矩形区域变体
- [ ] 多边形区域变体（支持多点绘制曲线边界）
- [ ] 支持曲线平滑处理

#### 2. 排座位工具 (Row) - 座位排布
- [ ] 直线排座位
- [ ] 弧形排座位

#### 3. 交错排工具 (Block) - 交织座位排
- [ ] 实现剧院式前后交错排列

---

### 🛠️ 标准工具（核心补充）

#### 4. 桌子工具 (Table)
- [ ] 圆桌
- [ ] 矩形桌
- [ ] 马蹄形桌

#### 5. 区域工具 (Area/GA) - 通用入场区域
- [ ] 矩形区域
- [ ] 圆形/椭圆形区域
- [ ] 多边形区域

#### 6. 形状工具 (Shape) - 场馆设施
- [ ] 绘制舞台、出口、洗手间等设施
- [ ] 支持添加标签
- [ ] 支持添加图标

#### 7. 文本工具 (Text)
- [ ] 添加文字标签
- [ ] 文字样式设置

#### 8. 图片工具 (Image)
- [ ] 上传底图
- [ ] 放置参考图
- [ ] 图片缩放和定位

#### 9. 图标工具 (Icon)
- [ ] 洗手间标识
- [ ] 出入口标识
- [ ] 其他设施图标库

---

### 🎨 编辑模式与交互

#### 10. 双击进入 Section 内部编辑模式
- [ ] 实现模式切换逻辑
- [ ] 面包屑导航显示
- [ ] 返回顶级视图功能

#### 11. 动态工具栏过滤
- [ ] 顶级视图：显示所有工具（选择、Section、排座位、交错排、桌子、GA、形状、文本、图片、图标）
- [ ] Section 内部视图：只显示座位相关工具（选择、排座位、交错排、桌子、区域、节点）

#### 12. 节点工具 (Node Tool)
- [ ] 编辑 Section 边界曲线
- [ ] 调整节点位置
- [ ] 调整曲线平滑度

#### 13. 工具变体展开器
- [ ] Section 工具变体选择（矩形/多边形）
- [ ] 排座位工具变体选择（直线/弧形）
- [ ] GA 工具变体选择（矩形/圆形/多边形）
- [ ] 变体切换 UI 组件

---

### ⚙️ 辅助功能

#### 14. 撤销/重做功能
- [ ] 历史记录栈管理
- [ ] Undo 按钮及快捷键
- [ ] Redo 按钮及快捷键
- [ ] 状态回滚机制

#### 15. 吸附网格 (Snap to Grid)
- [ ] 网格显示/隐藏切换
- [ ] 对齐辅助线
- [ ] 吸附距离阈值设置

---

## 📝 工具详细说明

### 一、顶级视图（绘制区域/整体布局）

当处于场馆概览层级时，工具栏包含：

| 工具图标 | 工具名称 | 功能说明 |
|---------|---------|---------|
| 鼠标指针 | 选择工具 (Select) | 选择、移动、编辑已有对象 |
| S 形图标 | Section 工具 | 绘制观众区域/区块，支持两种变体：<br>• 矩形区域 (Rectangle)<br>• 多边形区域 (Polygon) - 可通过多点绘制曲线边界 |
| 三个圆点横排 | 排座位工具 (Row) | 绘制直线或弧形座位排 |
| 九宫格圆点 | 交错排工具 (Block) | 绘制交织的座位排（如剧院式前后交错排列） |
| 圆形 | 桌子工具 (Table) | 绘制圆桌、矩形桌、马蹄形桌等 |
| GA 矩形 | 区域工具 (Area/GA) | 绘制通用 Admission 区域，支持：<br>• 矩形<br>• 圆形/椭圆形<br>• 多边形 |
| 矩形 | 形状工具 (Shape) | 绘制场馆设施（舞台、出口、洗手间等），可添加标签和图标 |
| A | 文本工具 (Text) | 添加文字标签 |
| 山脉图 | 图片工具 (Image) | 上传底图或参考图 |
| 人物图标 | 图标工具 (Icon) | 添加设施图标（如洗手间、出入口标识） |

### 二、Section 内部视图（绘制座位）

双击进入某个 Section 后，工具栏会过滤为与座位相关的工具：

- 选择工具（鼠标指针）
- 排座位工具（直线排、弧形排）
- 交错排工具（Block of intertwined rows）
- 桌子工具（圆形桌、矩形桌等）
- 区域工具（GA 区域）
- 节点工具 (Node Tool) - 用于编辑 Section 边界曲线

### 三、工具变体说明

许多工具右侧带有 > 箭头，点击后会展开变体选项：

- **Section 工具**：可选择矩形或多边形绘制方式
- **排座位工具**：可选择直线排或弧形排
- **GA 工具**：可选择矩形、圆形或多边形区域

### 四、辅助功能

- **撤销/重做**：顶部工具栏提供 Undo/Redo 按钮
- **吸附网格 (Snap to grid)**：顶部可切换，便于对齐
- **节点编辑**：使用 Node 工具可在绘制后调整 Section 的曲线平滑度

---

## 🚀 建议实现顺序

### 第一阶段：核心座位绘制能力
1. Section 工具（矩形和多边形变体，支持曲线平滑）
2. 排座位工具（直线排和弧形排）
3. 交错排工具（剧院式前后交错）

### 第二阶段：模式切换与节点编辑
4. 双击进入 Section 内部编辑模式
5. 根据编辑模式动态过滤工具栏
6. 节点工具（编辑 Section 边界曲线）

### 第三阶段：完整工具集
7. 桌子工具（圆桌、矩形桌、马蹄形桌）
8. 区域工具 (GA)（矩形/圆形/多边形）
9. 形状工具（场馆设施）
10. 文本工具
11. 图片工具
12. 图标工具

### 第四阶段：工具变体与辅助功能
13. 工具变体展开器 UI
14. 撤销/重做功能
15. 吸附网格功能
