# 左侧工具栏工具扩展计划

## 当前工具分析

### PanelLeft.tsx 已有工具
| 工具 | ID | 快捷键 | 分组 | 状态 |
|------|-----|--------|------|------|
| 选择工具 | select | V | 选择组 | ✅ |
| 选座工具 | select-seats | X | 选择组 | ✅ |
| 选择刷 | brush | C | 选择组 | ✅ |
| 焦点工具 | focal | F | 绘制组 | ✅ |
| 矩形区域 | section | S | 绘制组 | ✅ |
| 圆桌工具 | table | E | 绘制组 | ✅ |
| 矩形区域(旋转) | area | G | 绘制组 | ✅ |
| 多边形工具 | polygon | P | 绘制组 | ✅ |
| 单个座位 | single | 1 | 座位组 | ✅ |
| 行座位 | row | 2 | 座位组 | ✅ |
| 线座位 | line | 3 | 座位组 | ✅ |
| 多行矩阵 | multi-rows | 4 | 座位组 | ✅ |
| 平移工具 | hand | Space | 视图组 | ✅ |

## 缺失的工具

### 1. 座位绘制工具 ✅ 已完成
| 工具 | ID | 快捷键 | 说明 |
|------|-----|--------|------|
| 单个座位 | single | 1 | 逐个点击添加座位 |
| 行座位 | row | 2 | 拖拽创建一行座位 |
| 线座位 | line | 3 | 沿路径创建座位 |
| 多行矩阵 | multi-rows | 4 | 先拖动生成行，再垂直拖动生成多行 |

### 2. 多边形绘制工具
| 工具 | ID | 快捷键 | 说明 | 状态 |
|------|-----|--------|------|------|
| 多边形区域 | polygon | P | 逐点点击创建任意多边形 | ✅ 已完成 |
| 椭圆工具 | ellipse |  | 创建椭圆形区域 | ⏳ 待实现 |

### 3. 编辑工具
| 工具 | ID | 快捷键 | 说明 |
|------|-----|--------|------|
| 节点编辑 | edit-nodes |  | 编辑区域顶点 |
| 测量工具 | measure |  | 测量距离 |

### 4. 建议的工具分组结构

```
选择工具组 (Selection)
├── 选择工具 (V)
├── 选座工具 (X)
└── 选择刷 (C)

绘制工具组 (Drawing)
├── 焦点工具 (F)
├── 矩形区域 (S)
├── 多边形区域 (P) ✅
├── 圆桌工具 (E)
└── 椭圆工具 ⏳

座位工具组 (Seating) ✅
├── 单个座位 (1)
├── 行座位 (2)
├── 线座位 (3)
└── 多行矩阵 (4) ✅

编辑工具组 (Editing) ⏳
├── 节点编辑
└── 测量工具

视图工具组 (View)
└── 平移工具 (Space)
```

## 实现建议

### 1. 添加缺失的座位绘制工具
在 PanelLeft.tsx 中新增座位工具组，放置在绘制工具组之后。

### 2. 添加多边形工具
作为矩形区域的补充，用于创建不规则形状区域。

### 3. 键盘快捷键统一
- 使用单字母快捷键
- 避免与浏览器默认快捷键冲突
- 参考 seats.io 的快捷键设计

## 实现进度

| 优先级 | 工具 | 状态 | 备注 |
|--------|------|------|------|
| 高 | 座位绘制工具 (single/row/line/multi-rows) | ✅ 已完成 | 2025-02-25 已实现 |
| 中 | 多边形工具 (polygon) | ✅ 已完成 | 2025-02-25 已实现 |
| 低 | 椭圆工具 | ⏳ 待实现 | - |
| 低 | 编辑工具 (edit-nodes/measure) | ⏳ 待实现 | - |

## 已完成的实现

### 座位工具组 (2025-02-25)
- 使用快捷键 1/2/3/4 分别对应 single/row/line/multi-rows
- 使用图标：Circle、MoreHorizontal、Route、Grid3x3
- 位于绘制工具组和平移工具组之间

### 多行矩阵工具 (multi-rows)
- 快捷键 4
- 使用图标：Grid3x3
- 交互方式：先拖动生成第一行，再垂直拖动生成多行

### 多边形工具 (2025-02-25)
- 快捷键 P
- 使用图标：Hexagon
- 位于绘制工具组末尾

## 未实现/待优化项目

### 待实现工具

| 工具 | ID | 快捷键 | 分组 | 说明 | 优先级 |
|------|-----|--------|------|------|--------|
| 椭圆工具 | ellipse | - | 绘制组 | 创建椭圆形区域 | 低 |
| 节点编辑 | edit-nodes | - | 编辑组 | 编辑区域顶点 | 低 |
| 测量工具 | measure | - | 编辑组 | 测量距离 | 低 |

### 详细说明

#### 1. 椭圆工具 (ellipse)
- **用途**：创建椭圆形区域，作为矩形区域的补充
- **交互方式**：拖拽确定椭圆的外接矩形
- **依赖**：可能需要扩展多边形区域的渲染逻辑以支持椭圆

#### 2. 节点编辑 (edit-nodes)
- **用途**：编辑已创建区域（矩形、多边形等）的顶点位置
- **交互方式**：
  - 选中区域后显示顶点控制点
  - 拖拽顶点调整形状
  - 可能支持添加/删除顶点
- **依赖**：需要区域对象支持顶点编辑模式

#### 3. 测量工具 (measure)
- **用途**：测量画布上两点之间的距离
- **交互方式**：
  - 点击起点，拖拽到终点显示距离
  - 可能显示水平和垂直分量
- **UI**：需要临时显示测量结果的浮层
